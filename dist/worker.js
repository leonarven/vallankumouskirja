"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){var a=/*#__PURE__*/function(){function a(b){_classCallCheck(this,a),this.$string="",this.$contains={},b&&this.extend(b)}return _createClass(a,[{key:"extend",value:function extend(b){var c=null;if("object"==_typeof(b))for(var d in c="",b)null!=b[d]&&(b[d]=a.filterString2searchKey(b[d]),this.$contains[d]=(this.$contains[d]||"")+" "+b[d],c+=" "+b[d]);else"string"==typeof b&&0<b.trim().length&&(c=b);"string"==typeof c?this.$string=a.filterString2searchKey(this.$string,c):b&&console.warn("SearchString.extend :: Invalid argument")}},{key:"toString",value:function toString(){return this.$string}}]),a}();a.filterString2searchKey=function(){function b(a){return a.filter(function(a){return!!a}).map(function(a){return Array.isArray(a)?b(a):a}).join(" ")}var c=/[\.,:'\(\)\[\]\{\}\/\\]/g,d=/\s.{0,3}\s/g;// Poistettavat (whitespacella korvattavat) merkit
// Liian lyhyet whitespacen ympäröimät merkkijonot ( 0-3 merkkiä) (myös whitespacen, (2-5 merkkiä))
return function(e){return 1<arguments.length?a.filterString2searchKey(Array.prototype.slice.call(arguments)):(Array.isArray(e)&&(e=b(e)),"string"==typeof e?(" "+e.toLowerCase().replace(c," ")+" ").replace(d," ").trim():(console.warn("SearchString.filterString2searchkey :: Invalid argument",_typeof(e),e),""))}}(),angular.module("laulukirja-app",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,c){c.otherwise("/index"),a.state("index",{url:"/index",views:{"songsList@":{controller:"songListController",templateUrl:"partials/songlist.html"},"songView@":{controller:["$scope","$timeout",function(a,b){a.loading=b(function(){a.loading=!1})}],template:"<h3 style='text-align:left;padding-left:1em;'><b class='glyphicon glyphicon-share-alt' style='transform:rotate(230deg);'></b> Valitse laulu laululistasta</h3>"}},resolve:{songsIndex:["$rootScope","$http",function(a,c){return c({url:"songs/index.json",method:"GET"}).then(function(c){var d=c.data;for(var e in d){if(d[e].disabled){delete d[e];continue}d[e]=new b(e,d[e])}return a.songsArr=Object.keys(d),a.songsArr.sort(function(c,a){return d[c].num-d[a].num}),a.songsIndex=d})["catch"](console.error.bind(console,"Cannot GET 'songs/index.json'"))}]}}).state("index.song",{url:"/:song_key",views:{"songView@":{controller:"songViewController",templateUrl:"partials/songview.html"},"songMeta@":{controller:"songMetaController",templateUrl:"partials/songmeta.html"}},resolve:{$songMeta:["$rootScope","$http","$stateParams","$state","songsIndex",function(a,b,c,d,e){return e[c.song_key]||(console.error("Could not found song '"+c.song_key+"'"),d.go("index")),e[c.song_key]}],$songBody:["$templateRequest","$rootScope","$http","$stateParams","$state","$songMeta",function(a,b,c,d,e,f){return a(f.$templateUrl)["catch"](function(a){console.error("Could not GET '".concat(f.$templateUrl,"'"),a),e.go("index")})}]}})}]).run(["$rootScope","$state",function(a,b){var c=arguments;a.$state=b,a.songsIndex={},a.font_size=12,a.setSongFont=function(b){return a.font_size+=b},a.increaseFont=function(){return a.font_size*=1.1},a.decreaseFont=function(){return a.font_size*=.9},a.search="",a.songlist={open:!0},window.addEventListener("resize",a.$emit.bind(a,"resize")),a.$watch("songlist.open",a.$emit.bind(a,"resize")),a.$on("$stateChangeStart",function(b,c){try{"index"==c.name&&(a.$songMeta=null)}catch(a){console.error(a),b.preventDefault()}}),a.$on("$stateChangeError",function(a,b){console.error("$stateChangeError @ "+b.to,c)}),a.$on("$stateChangeSuccess",function(b,d){console.log("$stateChangeSuccess @ "+d.to,c),"index"==d.name&&(a.songlist.open=!0),angular.element(document.body).attr("state",d.name)}),a.$on("$viewContentLoaded",function(){console.log("$viewContentLoaded",c)}),a.$on("$stateNotFound",function(a,b){console.error("$stateNotFound @ "+b.to,c)})}]).controller("songListController",["$rootScope","$scope","$stateParams","songsIndex",function(a,b,c,d){b.$stateParams=c,b.songs=d,b.songsCount=0,b.runFilter=function(c){var c=a.search=(null==c?a.search:c)||"";for(var e in c&&(c=c.toLowerCase().trim()),c&&(c=c.split(/\s+/g)),b.songsCount=0,d)c?(d[e].$$filtered=!0,c.forEach(function(a){-1!=d[e].$search.$string.indexOf(a)&&(d[e].$$filtered=!1)})):d[e].$$filtered=!1,d[e].$$filtered||b.songsCount++},setTimeout(function(){b.runFilter()}),console.log(d)}]).controller("songViewController",["$rootScope","$scope","$sce","songsIndex","$songMeta","$songBody","$timeout",function(a,b,c,d,e,f,g){function h(){return g(function(){var b=document.getElementById("song-body"),c=b.parentNode.offsetWidth/b.offsetWidth;0<c&&(a.font_size*=c),console.log("refreshFont() :: ",a.font_size,"em")})["catch"](function(a){console.warn("Unable to customize font size",a)})}console.log("songViewController :: Loaded song "+e.title,e),b.$songMeta=e,b.$songBody=f;document.getElementById("song-body");768>=window.innerWidth&&(a.songlist.open=!1),a.$on("resize",h),b.loading=h().then(function(){b.loading=!1})}]).controller("songMetaController",["$rootScope","$scope","songsIndex","$songBody","$songMeta",function(a,b,c,d,e){for(var f in b.meta={title:e.title,author:e.author||null,links:e.links||{}},b.meta.links)b.meta.links[f]={title:f,href:b.meta.links[f]}}]).component("a_songList",{template:"partials/songlist.html",controller:["$scope","$rootScope",function(a,b){console.log(b.songsIndex)}]});var b=function b(c,d){for(var e in _classCallCheck(this,b),this.key=c,d)this[e]=d[e];this.$templateUrl="songs/".concat(c,"/song.html"),this.$search=new a({title:d.title||"",num:null==d.num?"":d.num.toString().trim()})}})();

//# sourceMappingURL=worker.js.map